---
import ViewProduct from '@/product/components/ViewProduct.astro'
import Layout from '@/product/layouts/Layout.astro'

import { APIProducts } from '@/services/API'
import { parseDataProducts } from '@/utils/parseDataProducts'

export const getStaticPaths = async () => {
  const data = await APIProducts.getProducts()

  const newData = parseDataProducts(data)

  return newData.map((data) => ({
    params: {
      id: data.id,
    },
    props: {
      fields: data,
    },
  }))
}

const { fields } = Astro.props
---

<Layout title="id">
  <!-- <SearchProducts /> -->

  <ViewProduct {...fields} />

  <!-- <SimilarProducts client:load /> -->
</Layout>
